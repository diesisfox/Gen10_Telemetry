<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        'use strict';
        //Node Core Modules
        const electron = require('electron');
        const { ipcRenderer } = electron;
        //Custom Modules
        const ports = require('../app/ConnectSerial');

        //displays to user serial ports that can be selected
        window.onload = function(){
            const AvailablePorts = ports.saveSerialPorts();
            let i = 0;
            let PortList = [];
            AvailablePorts.forEach(){
                PortList[i] = document.createElement("option");
                PortList[i].setAttribute("value", AvailablePorts[i].comName);
                PortList[i].setAttribute("id", `SerialPort${i}`);
                PortList[i].innerHTML = `Port Name: ${AvailablePorts[i].comName}, Manufacturer: ${AvailablePorts[i].manufacturer}`;
                document.getElementById("SerialPortSelect").appendChild(PortList[i]);
                ++i;
            }
        };

        document.getElementById("SerialPortSubmit").on('onsubmit', ()=>{
            const comName = document.getElementById("SerialPortSelect").value;
            const baudRate = document.getElementById("BaudRateSelect").value;
            let port = 0;
            port = ports.connect(comName, baudRate);
            if(port!=0){
                console.log('Connected!');
            }
        });

    </script>
</head>
<body>

<text>Choose a Serial Port: </text>
<select id="SerialPortSelect"></select><br>

<text>Select Baud Rate: </text>
<select id="BaudRateSelect">
    <option value="1200">1200</option>
    <option value="2400">2400</option>
    <option value="4800">4800</option>
    <option value="9600">9600</option>
    <option value="19200">19200</option>
    <option value="38400">38400</option>
    <option value="57600">57600</option>
    <option value="115200">115200</option>
</select><br>
<input type="submit" value="Connect" id="SerialPortListen">


<script>

</script>
</body>
</html>